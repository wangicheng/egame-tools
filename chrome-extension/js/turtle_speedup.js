/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this extension
*/

(() => {
  // src/entry-points/turtle_speedup.ts
  var WITH_ANIMATE = true;
  {
    const interval = setInterval(() => {
      if (!window.Turtle || !window.Turtle.animate || !window.Turtle.execute) {
        return;
      }
      clearInterval(interval);
      window.Turtle.execute = function() {
        window.BlocklyApps.log = [];
        window.BlocklyApps.ticks = 1e6;
        window.Turtle.code = window.Blockly.JavaScript.workspaceToCode(window.Turtle.workspace);
        try {
          eval(window.Turtle.code);
        } catch (e) {
          if (e !== Infinity) {
            alert(e);
          }
          if (e === Infinity && !WITH_ANIMATE) {
            const result = window.confirm(`程式陷入無限循環，確定要執行？
（執行 ${window.BlocklyApps.log.length} 個積木）`);
            if (!result) {
              window.BlocklyApps.log = [];
              WITH_ANIMATE = true;
            }
          }
        }
        window.Turtle.reset();
        window.Turtle.pid = window.setTimeout(window.Turtle.animate, 100);
      };
      const withAnimate = window.Turtle.animate;
      const withoutAnimate = function() {
        window.Turtle.pid = 0;
        window.BlocklyApps.log.forEach((tuple) => {
          const command = tuple.shift();
          window.Turtle.step(command, tuple);
          window.Turtle.display();
        });
        document.getElementById("spinner").style.visibility = "hidden";
        if (window.Turtle.level.noCheck() && !window.Turtle.isScratchBlank()) {
          window.BlocklyApps.setSaveCode();
          document.getElementById("saveButton").style.display = "inline";
        } else {
          const resetButton = document.querySelector("#resetButton");
          resetButton.style.display = "inline";
          resetButton.disabled = true;
          setTimeout(function() {
            resetButton.disabled = false;
          }, window.BlocklyApps.DOUBLE_CLICK_TIME);
          window.Turtle.checkAnswer();
        }
      };
      window.Turtle.animate = function() {
        if (WITH_ANIMATE) {
          withAnimate();
        } else {
          withoutAnimate();
        }
      };
    }, 200);
    const observer = new MutationObserver(function(mutationList, observer2) {
      const runButton = document.querySelector("#runButton");
      if (!runButton) {
        return;
      }
      observer2.disconnect();
      const parent = runButton.parentElement;
      const speedupButton = runButton.cloneNode(false);
      speedupButton.id = "speedupButton";
      speedupButton.textContent = "加速";
      speedupButton.style.width = "72px";
      speedupButton.style.paddingLeft = "25px";
      speedupButton.style.whiteSpace = "nowrap";
      speedupButton.addEventListener("click", () => {
        WITH_ANIMATE = false;
        window.Turtle.runButtonClick();
      });
      runButton.addEventListener("click", () => {
        WITH_ANIMATE = true;
      });
      parent.insertBefore(speedupButton, runButton);
    });
    observer.observe(document.documentElement, { attributes: false, childList: true, subtree: true });
  }
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL2VudHJ5LXBvaW50cy90dXJ0bGVfc3BlZWR1cC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsibGV0IFdJVEhfQU5JTUFURSA9IHRydWU7XG57XG4gIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGlmICghd2luZG93LlR1cnRsZSB8fCAhd2luZG93LlR1cnRsZS5hbmltYXRlIHx8ICF3aW5kb3cuVHVydGxlLmV4ZWN1dGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG5cbiAgICB3aW5kb3cuVHVydGxlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB3aW5kb3cuQmxvY2tseUFwcHMubG9nID0gW107XG4gICAgICB3aW5kb3cuQmxvY2tseUFwcHMudGlja3MgPSAxMDAwMDAwO1xuXG4gICAgICB3aW5kb3cuVHVydGxlLmNvZGUgPSB3aW5kb3cuQmxvY2tseS5KYXZhU2NyaXB0LndvcmtzcGFjZVRvQ29kZSh3aW5kb3cuVHVydGxlLndvcmtzcGFjZSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGV2YWwod2luZG93LlR1cnRsZS5jb2RlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gTnVsbCBpcyB0aHJvd24gZm9yIGluZmluaXRlIGxvb3AuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgYWJub3JtYWwgdGVybWluYXRpb24gaXMgYSB1c2VyIGVycm9yLlxuICAgICAgICBpZiAoZSAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICBhbGVydChlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXaGVuIHRoZXJlIGlzIGFuIEluZmluaXR5IGVycm9yLCBpdCBjYW5ub3QgYmUgZXhlY3V0ZWQgd2l0aG91dCBhbmltYXRpb24uXG4gICAgICAgIGlmIChlID09PSBJbmZpbml0eSAmJiAhV0lUSF9BTklNQVRFKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gd2luZG93LmNvbmZpcm0oYOeoi+W8j+mZt+WFpeeEoemZkOW+queSsO+8jOeiuuWumuimgeWft+ihjO+8n1xcbu+8iOWft+ihjCAke3dpbmRvdy5CbG9ja2x5QXBwcy5sb2cubGVuZ3RofSDlgIvnqY3mnKjvvIlgKTtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgd2luZG93LkJsb2NrbHlBcHBzLmxvZyA9IFtdO1xuICAgICAgICAgICAgV0lUSF9BTklNQVRFID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd2luZG93LkJsb2NrbHlBcHBzLmxvZyBub3cgY29udGFpbnMgYSB0cmFuc2NyaXB0IG9mIGFsbCB0aGUgdXNlcidzIGFjdGlvbnMuXG4gICAgICAvLyBSZXNldCB0aGUgZ3JhcGhpYyBhbmQgYW5pbWF0ZSB0aGUgdHJhbnNjcmlwdC5cbiAgICAgIHdpbmRvdy5UdXJ0bGUucmVzZXQoKTtcbiAgICAgIHdpbmRvdy5UdXJ0bGUucGlkID0gd2luZG93LnNldFRpbWVvdXQod2luZG93LlR1cnRsZS5hbmltYXRlLCAxMDApO1xuICAgIH07XG4gICAgY29uc3Qgd2l0aEFuaW1hdGUgPSB3aW5kb3cuVHVydGxlLmFuaW1hdGU7XG4gICAgY29uc3Qgd2l0aG91dEFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBBbGwgdGFza3Mgc2hvdWxkIGJlIGNvbXBsZXRlIG5vdy4gIENsZWFuIHVwIHRoZSBQSUQgbGlzdC5cbiAgICAgIHdpbmRvdy5UdXJ0bGUucGlkID0gMDtcbiAgICAgIHdpbmRvdy5CbG9ja2x5QXBwcy5sb2cuZm9yRWFjaCgodHVwbGU6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gdHVwbGUuc2hpZnQoKTtcbiAgICAgICAgd2luZG93LlR1cnRsZS5zdGVwKGNvbW1hbmQsIHR1cGxlKTtcbiAgICAgICAgd2luZG93LlR1cnRsZS5kaXNwbGF5KCk7XG4gICAgICB9KTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGlubmVyJykhLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgIGlmICh3aW5kb3cuVHVydGxlLmxldmVsLm5vQ2hlY2soKSAmJiAhd2luZG93LlR1cnRsZS5pc1NjcmF0Y2hCbGFuaygpKSB7XG4gICAgICAgIHdpbmRvdy5CbG9ja2x5QXBwcy5zZXRTYXZlQ29kZSgpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZUJ1dHRvbicpIS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDljp/mnKzlnKggd2luZG93LlR1cnRsZS5ydW5CdXR0b25DbGlja++8jOaUueaIkOeVq+WujOW+jOaJjemhr+ekulxuICAgICAgICBjb25zdCByZXNldEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KCcjcmVzZXRCdXR0b24nKSE7XG4gICAgICAgIHJlc2V0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgLy8gUHJldmVudCBkb3VibGUtY2xpY2tzIG9yIGRvdWJsZS10YXBzLlxuICAgICAgICByZXNldEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJlc2V0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0sIHdpbmRvdy5CbG9ja2x5QXBwcy5ET1VCTEVfQ0xJQ0tfVElNRSk7XG5cbiAgICAgICAgd2luZG93LlR1cnRsZS5jaGVja0Fuc3dlcigpO1xuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LlR1cnRsZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKFdJVEhfQU5JTUFURSkge1xuICAgICAgICB3aXRoQW5pbWF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2l0aG91dEFuaW1hdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCAyMDApO1xuXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9uTGlzdCwgb2JzZXJ2ZXIpIHtcbiAgICBjb25zdCBydW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcnVuQnV0dG9uJyk7XG4gICAgaWYgKCFydW5CdXR0b24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIGNvbnN0IHBhcmVudCA9IHJ1bkJ1dHRvbi5wYXJlbnRFbGVtZW50ITtcbiAgICBjb25zdCBzcGVlZHVwQnV0dG9uID0gcnVuQnV0dG9uLmNsb25lTm9kZShmYWxzZSkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgc3BlZWR1cEJ1dHRvbi5pZCA9ICdzcGVlZHVwQnV0dG9uJztcbiAgICBzcGVlZHVwQnV0dG9uLnRleHRDb250ZW50ID0gJ+WKoOmAnyc7XG4gICAgc3BlZWR1cEJ1dHRvbi5zdHlsZS53aWR0aCA9ICc3MnB4JztcbiAgICBzcGVlZHVwQnV0dG9uLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzI1cHgnO1xuICAgIHNwZWVkdXBCdXR0b24uc3R5bGUud2hpdGVTcGFjZSA9ICdub3dyYXAnO1xuXG4gICAgc3BlZWR1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIFdJVEhfQU5JTUFURSA9IGZhbHNlO1xuICAgICAgd2luZG93LlR1cnRsZS5ydW5CdXR0b25DbGljaygpO1xuICAgIH0pO1xuICAgIHJ1bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIFdJVEhfQU5JTUFURSA9IHRydWU7XG4gICAgfSk7XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShzcGVlZHVwQnV0dG9uLCBydW5CdXR0b24pO1xuICB9KTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsgYXR0cmlidXRlczogZmFsc2UsIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7QUFBQSxNQUFJLGVBQWU7QUFDbkI7QUFDRSxVQUFNLFdBQVcsWUFBWSxNQUFNO0FBQ2pDLFVBQUksQ0FBQyxPQUFPLFVBQVUsQ0FBQyxPQUFPLE9BQU8sV0FBVyxDQUFDLE9BQU8sT0FBTyxTQUFTO0FBQ3RFO0FBQUEsTUFDRjtBQUNBLG9CQUFjLFFBQVE7QUFFdEIsYUFBTyxPQUFPLFVBQVUsV0FBWTtBQUNsQyxlQUFPLFlBQVksTUFBTSxDQUFDO0FBQzFCLGVBQU8sWUFBWSxRQUFRO0FBRTNCLGVBQU8sT0FBTyxPQUFPLE9BQU8sUUFBUSxXQUFXLGdCQUFnQixPQUFPLE9BQU8sU0FBUztBQUV0RixZQUFJO0FBQ0YsZUFBSyxPQUFPLE9BQU8sSUFBSTtBQUFBLFFBQ3pCLFNBQVMsR0FBRztBQUdWLGNBQUksTUFBTSxVQUFVO0FBQ2xCLGtCQUFNLENBQUM7QUFBQSxVQUNUO0FBRUEsY0FBSSxNQUFNLFlBQVksQ0FBQyxjQUFjO0FBQ25DLGtCQUFNLFNBQVMsT0FBTyxRQUFRO0FBQUEsTUFBd0IsT0FBTyxZQUFZLElBQUksTUFBTSxPQUFPO0FBQzFGLGdCQUFJLENBQUMsUUFBUTtBQUNYLHFCQUFPLFlBQVksTUFBTSxDQUFDO0FBQzFCLDZCQUFlO0FBQUEsWUFDakI7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUlBLGVBQU8sT0FBTyxNQUFNO0FBQ3BCLGVBQU8sT0FBTyxNQUFNLE9BQU8sV0FBVyxPQUFPLE9BQU8sU0FBUyxHQUFHO0FBQUEsTUFDbEU7QUFDQSxZQUFNLGNBQWMsT0FBTyxPQUFPO0FBQ2xDLFlBQU0saUJBQWlCLFdBQVk7QUFFakMsZUFBTyxPQUFPLE1BQU07QUFDcEIsZUFBTyxZQUFZLElBQUksUUFBUSxDQUFDLFVBQWU7QUFDN0MsZ0JBQU0sVUFBVSxNQUFNLE1BQU07QUFDNUIsaUJBQU8sT0FBTyxLQUFLLFNBQVMsS0FBSztBQUNqQyxpQkFBTyxPQUFPLFFBQVE7QUFBQSxRQUN4QixDQUFDO0FBQ0QsaUJBQVMsZUFBZSxTQUFTLEVBQUcsTUFBTSxhQUFhO0FBQ3ZELFlBQUksT0FBTyxPQUFPLE1BQU0sUUFBUSxLQUFLLENBQUMsT0FBTyxPQUFPLGVBQWUsR0FBRztBQUNwRSxpQkFBTyxZQUFZLFlBQVk7QUFDL0IsbUJBQVMsZUFBZSxZQUFZLEVBQUcsTUFBTSxVQUFVO0FBQUEsUUFDekQsT0FBTztBQUVMLGdCQUFNLGNBQWMsU0FBUyxjQUFpQyxjQUFjO0FBQzVFLHNCQUFZLE1BQU0sVUFBVTtBQUU1QixzQkFBWSxXQUFXO0FBQ3ZCLHFCQUFXLFdBQVk7QUFDckIsd0JBQVksV0FBVztBQUFBLFVBQ3pCLEdBQUcsT0FBTyxZQUFZLGlCQUFpQjtBQUV2QyxpQkFBTyxPQUFPLFlBQVk7QUFBQSxRQUM1QjtBQUFBLE1BQ0Y7QUFDQSxhQUFPLE9BQU8sVUFBVSxXQUFZO0FBQ2xDLFlBQUksY0FBYztBQUNoQixzQkFBWTtBQUFBLFFBQ2QsT0FBTztBQUNMLHlCQUFlO0FBQUEsUUFDakI7QUFBQSxNQUNGO0FBQUEsSUFDRixHQUFHLEdBQUc7QUFFTixVQUFNLFdBQVcsSUFBSSxpQkFBaUIsU0FBVSxjQUFjQSxXQUFVO0FBQ3RFLFlBQU0sWUFBWSxTQUFTLGNBQWMsWUFBWTtBQUNyRCxVQUFJLENBQUMsV0FBVztBQUNkO0FBQUEsTUFDRjtBQUNBLE1BQUFBLFVBQVMsV0FBVztBQUNwQixZQUFNLFNBQVMsVUFBVTtBQUN6QixZQUFNLGdCQUFnQixVQUFVLFVBQVUsS0FBSztBQUMvQyxvQkFBYyxLQUFLO0FBQ25CLG9CQUFjLGNBQWM7QUFDNUIsb0JBQWMsTUFBTSxRQUFRO0FBQzVCLG9CQUFjLE1BQU0sY0FBYztBQUNsQyxvQkFBYyxNQUFNLGFBQWE7QUFFakMsb0JBQWMsaUJBQWlCLFNBQVMsTUFBTTtBQUM1Qyx1QkFBZTtBQUNmLGVBQU8sT0FBTyxlQUFlO0FBQUEsTUFDL0IsQ0FBQztBQUNELGdCQUFVLGlCQUFpQixTQUFTLE1BQU07QUFDeEMsdUJBQWU7QUFBQSxNQUNqQixDQUFDO0FBQ0QsYUFBTyxhQUFhLGVBQWUsU0FBUztBQUFBLElBQzlDLENBQUM7QUFDRCxhQUFTLFFBQVEsU0FBUyxpQkFBaUIsRUFBRSxZQUFZLE9BQU8sV0FBVyxNQUFNLFNBQVMsS0FBSyxDQUFDO0FBQUEsRUFDbEc7IiwKICAibmFtZXMiOiBbIm9ic2VydmVyIl0KfQo=
