/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this extension
*/

(() => {
  // src/entry-points/turtle_speedup.ts
  var WITH_ANIMATE = true;
  {
    const interval = setInterval(() => {
      if (!window.Turtle || !Turtle.animate || !Turtle.execute) {
        return;
      }
      clearInterval(interval);
      Turtle.execute = function() {
        BlocklyApps.log = [];
        BlocklyApps.ticks = 1e6;
        Turtle.code = Blockly.JavaScript.workspaceToCode(Turtle.workspace);
        try {
          eval(Turtle.code);
        } catch (e) {
          if (e !== Infinity) {
            alert(e);
          }
          if (e === Infinity && !WITH_ANIMATE) {
            const result = window.confirm(`程式陷入無限循環，確定要執行？
（執行 ${BlocklyApps.log.length} 個積木）`);
            if (!result) {
              BlocklyApps.log = [];
              WITH_ANIMATE = true;
            }
          }
        }
        Turtle.reset();
        Turtle.pid = window.setTimeout(Turtle.animate, 100);
      };
      const withAnimate = Turtle.animate;
      const withoutAnimate = function() {
        Turtle.pid = 0;
        BlocklyApps.log.forEach((tuple) => {
          var command = tuple.shift();
          Turtle.step(command, tuple);
          Turtle.display();
        });
        document.getElementById("spinner").style.visibility = "hidden";
        if (Turtle.level.noCheck() && !Turtle.isScratchBlank()) {
          BlocklyApps.setSaveCode();
          document.getElementById("saveButton").style.display = "inline";
        } else {
          var resetButton = document.getElementById("resetButton");
          resetButton.style.display = "inline";
          resetButton.disabled = true;
          setTimeout(function() {
            resetButton.disabled = false;
          }, BlocklyApps.DOUBLE_CLICK_TIME);
          Turtle.checkAnswer();
        }
      };
      Turtle.animate = function() {
        if (WITH_ANIMATE) {
          withAnimate();
        } else {
          withoutAnimate();
        }
      };
    }, 200);
    const observer = new MutationObserver(function(mutationList, observer2) {
      const runButton = document.querySelector("#runButton");
      if (!runButton) {
        return;
      }
      observer2.disconnect();
      const parent = runButton.parentElement;
      const speedupButton = runButton.cloneNode(false);
      speedupButton.id = "speedupButton";
      speedupButton.textContent = "加速";
      speedupButton.style.width = "72px";
      speedupButton.style.paddingLeft = "25px";
      speedupButton.style.whiteSpace = "nowrap";
      speedupButton.addEventListener("click", () => {
        WITH_ANIMATE = false;
        Turtle.runButtonClick();
      });
      runButton.addEventListener("click", () => {
        WITH_ANIMATE = true;
      });
      parent.insertBefore(speedupButton, runButton);
    });
    observer.observe(document.documentElement, { attributes: false, childList: true, subtree: true });
  }
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL2VudHJ5LXBvaW50cy90dXJ0bGVfc3BlZWR1cC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsibGV0IFdJVEhfQU5JTUFURSA9IHRydWU7XHJcbntcclxuICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgIGlmICghd2luZG93LlR1cnRsZSB8fCAhVHVydGxlLmFuaW1hdGUgfHwgIVR1cnRsZS5leGVjdXRlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG5cclxuICAgIFR1cnRsZS5leGVjdXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBCbG9ja2x5QXBwcy5sb2cgPSBbXTtcclxuICAgICAgQmxvY2tseUFwcHMudGlja3MgPSAxMDAwMDAwO1xyXG5cclxuICAgICAgVHVydGxlLmNvZGUgPSBCbG9ja2x5LkphdmFTY3JpcHQud29ya3NwYWNlVG9Db2RlKFR1cnRsZS53b3Jrc3BhY2UpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBldmFsKFR1cnRsZS5jb2RlKTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIE51bGwgaXMgdGhyb3duIGZvciBpbmZpbml0ZSBsb29wLlxyXG4gICAgICAgIC8vIE90aGVyd2lzZSwgYWJub3JtYWwgdGVybWluYXRpb24gaXMgYSB1c2VyIGVycm9yLlxyXG4gICAgICAgIGlmIChlICE9PSBJbmZpbml0eSkge1xyXG4gICAgICAgICAgYWxlcnQoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdoZW4gdGhlcmUgaXMgYW4gSW5maW5pdHkgZXJyb3IsIGl0IGNhbm5vdCBiZSBleGVjdXRlZCB3aXRob3V0IGFuaW1hdGlvbi5cclxuICAgICAgICBpZiAoZSA9PT0gSW5maW5pdHkgJiYgIVdJVEhfQU5JTUFURSkge1xyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gd2luZG93LmNvbmZpcm0oYOeoi+W8j+mZt+WFpeeEoemZkOW+queSsO+8jOeiuuWumuimgeWft+ihjO+8n1xcbu+8iOWft+ihjCAke0Jsb2NrbHlBcHBzLmxvZy5sZW5ndGh9IOWAi+epjeacqO+8iWApO1xyXG4gICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgQmxvY2tseUFwcHMubG9nID0gW107XHJcbiAgICAgICAgICAgIFdJVEhfQU5JTUFURSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBCbG9ja2x5QXBwcy5sb2cgbm93IGNvbnRhaW5zIGEgdHJhbnNjcmlwdCBvZiBhbGwgdGhlIHVzZXIncyBhY3Rpb25zLlxyXG4gICAgICAvLyBSZXNldCB0aGUgZ3JhcGhpYyBhbmQgYW5pbWF0ZSB0aGUgdHJhbnNjcmlwdC5cclxuICAgICAgVHVydGxlLnJlc2V0KCk7XHJcbiAgICAgIFR1cnRsZS5waWQgPSB3aW5kb3cuc2V0VGltZW91dChUdXJ0bGUuYW5pbWF0ZSwgMTAwKTtcclxuICAgIH07XHJcbiAgICBjb25zdCB3aXRoQW5pbWF0ZSA9IFR1cnRsZS5hbmltYXRlO1xyXG4gICAgY29uc3Qgd2l0aG91dEFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIC8vIEFsbCB0YXNrcyBzaG91bGQgYmUgY29tcGxldGUgbm93LiAgQ2xlYW4gdXAgdGhlIFBJRCBsaXN0LlxyXG4gICAgICBUdXJ0bGUucGlkID0gMDtcclxuICAgICAgQmxvY2tseUFwcHMubG9nLmZvckVhY2godHVwbGUgPT4ge1xyXG4gICAgICAgIHZhciBjb21tYW5kID0gdHVwbGUuc2hpZnQoKTtcclxuICAgICAgICBUdXJ0bGUuc3RlcChjb21tYW5kLCB0dXBsZSk7XHJcbiAgICAgICAgVHVydGxlLmRpc3BsYXkoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGlubmVyJykuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICBpZiAoVHVydGxlLmxldmVsLm5vQ2hlY2soKSAmJiAhVHVydGxlLmlzU2NyYXRjaEJsYW5rKCkpIHtcclxuICAgICAgICBCbG9ja2x5QXBwcy5zZXRTYXZlQ29kZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2F2ZUJ1dHRvblwiKS5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDljp/mnKzlnKggVHVydGxlLnJ1bkJ1dHRvbkNsaWNr77yM5pS55oiQ55Wr5a6M5b6M5omN6aGv56S6XHJcbiAgICAgICAgdmFyIHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0QnV0dG9uJyk7XHJcbiAgICAgICAgcmVzZXRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gICAgICAgIC8vIFByZXZlbnQgZG91YmxlLWNsaWNrcyBvciBkb3VibGUtdGFwcy5cclxuICAgICAgICByZXNldEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJlc2V0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7IH0sIEJsb2NrbHlBcHBzLkRPVUJMRV9DTElDS19USU1FKTtcclxuXHJcbiAgICAgICAgVHVydGxlLmNoZWNrQW5zd2VyKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFR1cnRsZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoV0lUSF9BTklNQVRFKSB7XHJcbiAgICAgICAgd2l0aEFuaW1hdGUoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aXRob3V0QW5pbWF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgMjAwKTtcclxuXHJcbiAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25MaXN0LCBvYnNlcnZlcikge1xyXG4gICAgY29uc3QgcnVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNydW5CdXR0b25cIik7XHJcbiAgICBpZiAoIXJ1bkJ1dHRvbikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICBjb25zdCBwYXJlbnQgPSBydW5CdXR0b24ucGFyZW50RWxlbWVudDtcclxuICAgIGNvbnN0IHNwZWVkdXBCdXR0b24gPSBydW5CdXR0b24uY2xvbmVOb2RlKGZhbHNlKTtcclxuICAgIHNwZWVkdXBCdXR0b24uaWQgPSAnc3BlZWR1cEJ1dHRvbic7XHJcbiAgICBzcGVlZHVwQnV0dG9uLnRleHRDb250ZW50ID0gJ+WKoOmAnyc7XHJcbiAgICBzcGVlZHVwQnV0dG9uLnN0eWxlLndpZHRoID0gJzcycHgnO1xyXG4gICAgc3BlZWR1cEJ1dHRvbi5zdHlsZS5wYWRkaW5nTGVmdCA9ICcyNXB4JztcclxuICAgIHNwZWVkdXBCdXR0b24uc3R5bGUud2hpdGVTcGFjZSA9ICdub3dyYXAnO1xyXG5cclxuICAgIHNwZWVkdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIFdJVEhfQU5JTUFURSA9IGZhbHNlO1xyXG4gICAgICBUdXJ0bGUucnVuQnV0dG9uQ2xpY2soKTtcclxuICAgIH0pXHJcbiAgICBydW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IFdJVEhfQU5JTUFURSA9IHRydWU7IH0pO1xyXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShzcGVlZHVwQnV0dG9uLCBydW5CdXR0b24pO1xyXG4gIH0pO1xyXG4gIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7IGF0dHJpYnV0ZXM6IGZhbHNlLCBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcbn0iXSwKICAibWFwcGluZ3Mi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
